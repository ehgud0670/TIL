
## Map 컬렉션

* Map 컬렉션은 키(key)와 값(value)으로 구성된 Entry 객체를 저장하는 구조를 가지고 있다. **여기서 키와 값은 모두 객체이다.**
* 키는 중복 저장될 수 없지만 값은 중복 저장 될 수 있다. 
* 만약 기존에 저장된 키와 동일한 키로 값을 저장하면 기존의 값은 없어지고 새로운 값으로 대치된다. 

Map 컬렉션인 것들: HashMap, Hashtable, LinkedHashMap, Properties, TreeMap 등등 <br>

Map 컬렉션에서 공통적으로 사용 가능한 Map 인터페이스의 메소드들

| 기능 | 메소드                     |  설명                                    |
|------|----------------------------|------------------------------------------|
|객체 추가 | V put(K key, V value)  | 주어진 키로 값을 저장. 새로운 키일 경우 null을 리턴하고 동일한 키가 있을 경우 값을 대체하고 이전 값을 리턴|
|객체 검색 | boolean containsKey(Object key) | 주어진 키가 있는지 여부         |
|          | boolean containsValue(Object value) | 주어진 값이 있는지 여부     | 
|  | Set\<Map.Entry\<K,V>> entrySet() | 키와 값의 쌍으로 구성된 모든 Map.Entry 객체를 Set에 담아서 리턴 |
|  | V get(Object key) | 주어진 키가 있는 값을 리턴 |
|  | boolean isEmpty() | 컬렉션이 비어 있는지 여부 |
|  | Set\<K> keySet()  | 모든 키를 Set 객체에 담아서 리턴 |
|  | int Size() | 저장된 키의 총 수를 리턴 |
|  | Collection\<V> values()| 저장된 모든 값을 Collection에 담아서 리턴 |
| 객체 삭제 | void clear()  | 모든 Map.Entry(키와 값)를 삭제 |
|  |V remove(Object key) | 주어진 키와 일치하는 Map.Entry를 삭제하고 값을 리턴 |

=> 메소드의 매개 변수 타입과 리턴 타입에 K와 V라는 타입 파라미터가 있는데, 이것은 Map 인터페이스가 **제네릭 타입**이기 때문이다.<br>

```java
Map<String, Integer> map = ~;
map.put("홍길동",30); // 객체 추가
int score = map.get("홍길동"); // 주어진 키가 있는 값을 리턴
map.remove("홍길동") // 키와 일치한 Map.Entry를 삭제하고 값을 리턴
```
저장된 전체 객체를 대상으로 하나씩 얻는 방법에는 두가지 방법이 있다.<br>

1번째 방법: key로 하나씩 불러오기<br>
```java
Map<K,V> map = ~;
Set<K> keySet = map.keySet();
Iterator<K> keyIterator = keySet.iterator();
while(keyIterator.hasNext()){
  K key = keyIterator.next();
  V value = map.get(key); //key와 일치하는 키가 있는 Map.Entry의 값 반환.
}

```
2번째 방법: entrySet() 메소드로 모든 Map.Entry 를 Set 컬렉션으로 얻은 다음, 반복자를 통해 Map.Entry를 하나씩 얻고 <br>
getKey()와 getValue() 메소드를 이용해 키와 값을 얻는다.

```java
Set<Map.Entry<K,V>> entrySet = map.entrySet();
Iterator<Map.Entry<K,V>> entryIterator = entrySet.iterator();
while(entryIterator.hasNext()){
	Map.Entry <K,V> entry = entryIterator.next();
  K key = entry.getKey();
  V value = entry.getValue();
```

> HashMap
: HashMap은 Map 인터페이스를 구현한 대표적인 Map 컬렉션이다. <br>
* HashMap의 키로 사용할 객체는 hashCode()와 equals() 메소드를 재정의해서 동등 객체가 될 조건을 정해야 한다.
* 동등 객체, 즉 동일한 키가 될 조건은 **hashCode()의 리턴값이 같아야 하고, equals() 메소드가 true를 리턴해야 한다.** 
(주로 키 타입은 String을 많이 사용하는데, String은 문자열이 같은 경우 동등 객체가 될 수 있도록 hashCode()와 equals() 메소드가 재정의 되어 있다.)<br>
* HashMap은 키 검사할때 먼저 hashCode()메소드로 서로 다르면 다른 키라고 인식하고, 같으면 이후 equals() 메소드로 또 검사하는데 이때 다르면 또 다른 키라 인식하고, 이때 같으면 비로소 같은 키라 판단한다.  


```java
Map <K,V> map = new HashMap <K,V> ();
```
=> 키와 값의 타입은 기본 타입(byte,short,int,float,double,boolean,char)을 사용할 수 없고, 클래스 및 인터페이스 타입만 가능하다.

```java
Map<String, Integer> map = new HashMap<String,Integer>();
```

예제 <br>
```java
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

public class HashMapExample {
    public static void main(String[] args) {
        //Map 컬렉션 생성
        Map<String,Integer> map = new HashMap();


        //객체 저장, 우리 가족.
        map.put("김창노",58);
        map.put("류영숙",64);
        map.put("김유정",89);
        map.put("김도형",93);
        map.put("김도연",93);

        System.out.println("총 Entry 수: "+map.size()); // 저장된 총 Entry의 수 얻기

        //객체찾기
        System.out.println("\t김도형: "+map.get("김도형")); // 이름(키)로 (년생)값을 검색
        System.out.println();

        //객체를 하나씩 처리
        Set<String> keySet = map.keySet();

        for (String key : keySet) {
            Integer value = map.get(key);
            System.out.println("\t" + key + ": " + value);
        }
        System.out.println();

        //객체 삭제
        map.remove("김도형");
        System.out.println("총 Entry 수: " +map.size());

        //객체를 하나씩 처리
        Set<Map.Entry<String,Integer>> entrySet = map.entrySet();

        for (Map.Entry<String, Integer> entry : entrySet) {
            String key = entry.getKey();
            Integer value = entry.getValue();
            System.out.println("\t"+key+" :" +value);
        }
        System.out.println();

        map.clear();
        System.out.println("총 Entry 수: " +map.size());
    }
}

```

키로 사용할 객체 만들기 <br>

```java
class Student  {
    private int sno;
    public String name;

    Student(int sno, String name){
        this.sno = sno;
        this.name = name;
    }

    @Override// 이름과 학번이 같다면 true을 리턴, 아니면 false를 리턴.
    public boolean equals(Object obj) {
       if(obj instanceof Student){
           Student student = (Student)obj;
           return (sno == student.sno) && (name.equals(student.name));
       }else{
           return  false;
       }
    }

    @Override// 이름과 학번이 같다면 동일한 값을 리턴
    public int hashCode() {
       return sno+name.hashCode();
    }
}
```

학번과 이름이 같은 경우 동일한 키로 인식<br>
```java
public class StudentExample {
    public static void main(String[] args) {
        Map<Student, Integer> map = new HashMap<>();
        map.put(new Student(13,"아이유"), 20);
        map.put(new Student(13,"아이유"), 20);//학번과 이름이 같은 Student를 키로 저장.

        System.out.println("총 Entry의 개수: "+map.size());// 전체 Entry의 개수: 1
    }
}
```
